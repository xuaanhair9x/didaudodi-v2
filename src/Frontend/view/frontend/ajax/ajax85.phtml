<?php if($this->commentList) { ?>
    <div class="s-box-comment">
        <?php foreach ($this->commentList as $value){
            $star = $value['star'] ?? 0;
            $remainStar = 5 - $star;
        ?>
            <div class="s-comment-1">
                <div class="s_content">
                    <div class="author"><?php echo $value['fullname']; ?></div>
                    <div class="star">
                        <div class="b-star-2">
                            <div class="b_star">
                                <span>
                                    <?php
                                        for ($i = 0; $i < $star; $i++) {
                                            echo '<i class="fa fa-star" aria-hidden="true"></i>';
                                        }
                                        for ($i = 0; $i < $remainStar; $i++) {
                                            echo '<i class="fa fa-star-o" aria-hidden="true"></i>';
                                        }
                                    ?>
                                </span>
                            </div>
                        </div>
                        <div class="date"><?php echo date('d/m/Y', strtotime($value['date_created'])); ?></div>
                    </div>
                    <h3 class="title"><?php echo $value['title']; ?></h3>
                    <p class="desc"><?php echo $value['comment']; ?></p>
                    <?php if(!empty($value['used'])) { ?>
                        <div class="name"><div>Đã sử dụng <?php echo $value['used']; ?></div></div>
                        <div class="check"><i class="fa fa-check-circle" aria-hidden="true"></i> Đã mua hàng</div>
                    <?php } ?>
                </div>
                <div class="s_like">
                    <span><?php echo $this->info['headline']['slug-15']; ?></span>
                    <div>
                        <a href="javascript:;" <?php echo $this->logged ? 'ht-trigger="like" onclick="changeThis(this, \'like\');" data-id="'.$value['id'].'"':'ht-trigger="c-modal" ht-target="#s-sign-in-1"' ?> <?php echo in_array($value['id'], $this->logged['listLike']) ? 'class="is-active"':''; ?>>
                            <svg xmlns="http://www.w3.org/2000/svg" width="19.931" height="21.592" viewBox="0 0 19.931 21.592"><path fill="#424453" class="a" d="M8.057,22.1H4.83A.83.83,0,0,1,4,21.27v-8.3a.83.83,0,0,1,.83-.83H10.2l1.384-2.08Q12.6,7.973,13.115,6.9q.256-.537.382-.814c.027-.06.049-.11.066-.149a.261.261,0,0,0-.016.135,3.507,3.507,0,0,1,.137-1.5A2.2,2.2,0,0,1,15.85,3a2.9,2.9,0,0,1,1.758.607c1.046.725,1.341,1.91,1.341,3.545a10.117,10.117,0,0,1-.44,2.274,10.908,10.908,0,0,0-.39,1.876c0,.134.3.445,1.026.83,2.016-.025,3.268.191,3.909.8a3.814,3.814,0,0,1,.879,2.675,2.318,2.318,0,0,1-.5,1.569,3.306,3.306,0,0,1-1.115,2.647,3,3,0,0,1-.357,1.34,3.215,3.215,0,0,1-1.124,1.226,3.226,3.226,0,0,1-2.715,2.2,23.153,23.153,0,0,1-5.4-.942A16.649,16.649,0,0,1,10.949,22.4a2.966,2.966,0,0,0-.5-.3h-2.3A.839.839,0,0,1,8.057,22.1Zm.926-1.655h1.661a.83.83,0,0,1,.364.084,4.516,4.516,0,0,1,1.08.665,17.22,17.22,0,0,0,1.462,1.018,28.19,28.19,0,0,0,4.568.719,1.632,1.632,0,0,0,1.137-1.089.83.83,0,0,1,.526-.772,1.457,1.457,0,0,0,.707-.68,1.2,1.2,0,0,0,.149-.777.83.83,0,0,1,.358-.862,1.621,1.621,0,0,0,.741-1.672.83.83,0,0,1,.333-.9c.149-.1.2-.218.2-.573a2.536,2.536,0,0,0-.375-1.483,6.4,6.4,0,0,0-2.93-.33.83.83,0,0,1-.388-.088c-1.36-.681-2.116-1.438-2.119-2.4A10.034,10.034,0,0,1,16.9,9.027a11,11,0,0,0,.391-1.874c0-1.113-.191-1.878-.672-2.214a1.287,1.287,0,0,0-.766-.277.553.553,0,0,0-.588.435,2.431,2.431,0,0,0-.05.987c.013.312-.1.552-2.161,4.752L13,10.93l-1.661,2.5a.83.83,0,0,1-.691.37H8.983ZM5.661,13.8v6.644H7.322V13.8Z" transform="translate(-4 -3)"/></svg>
                            <span><?php echo $value['like']; ?></span>
                        </a>
                        <a href="javascript:;" <?php echo $this->logged ? 'ht-trigger="dislike" onclick="changeThis(this, \'dislike\');" data-id="'.$value['id'].'"':'ht-trigger="c-modal" ht-target="#s-sign-in-1"' ?> <?php echo in_array($value['id'], $this->logged['listDislike']) ? 'class="is-active"':''; ?>>
                            <svg xmlns="http://www.w3.org/2000/svg" width="19.931" height="21.592" viewBox="0 0 19.931 21.592"><path class="a" d="M8.152,15.457H4.83a.83.83,0,0,1-.83-.83v-8.3a.83.83,0,0,1,.83-.83H8.057a.839.839,0,0,1,.1-.005h2.3a2.966,2.966,0,0,0,.5-.3A16.649,16.649,0,0,1,12.72,3.942,23.153,23.153,0,0,1,18.118,3a3.226,3.226,0,0,1,2.715,2.2,3.215,3.215,0,0,1,1.124,1.226,3,3,0,0,1,.357,1.34,3.306,3.306,0,0,1,1.115,2.647,2.318,2.318,0,0,1,.5,1.569,3.814,3.814,0,0,1-.879,2.675c-.641.611-1.892.827-3.909.8-.723.385-1.025.7-1.026.83a10.908,10.908,0,0,0,.39,1.876,10.117,10.117,0,0,1,.44,2.274c0,1.635-.3,2.82-1.341,3.545a2.9,2.9,0,0,1-1.758.607,2.2,2.2,0,0,1-2.166-1.577,3.507,3.507,0,0,1-.137-1.5.261.261,0,0,0,.016.135c-.017-.039-.039-.088-.066-.149q-.125-.276-.382-.814-.511-1.071-1.532-3.153L10.2,15.457Zm.83-8.31V13.8h1.661a.83.83,0,0,1,.691.37L13,16.662l.054.094c2.059,4.2,2.174,4.44,2.161,4.752a2.431,2.431,0,0,0,.05.987.553.553,0,0,0,.588.435,1.287,1.287,0,0,0,.766-.277c.481-.336.672-1.1.672-2.214a11,11,0,0,0-.391-1.874,10.034,10.034,0,0,1-.439-2.281c0-.963.76-1.72,2.119-2.4a.83.83,0,0,1,.388-.088,6.4,6.4,0,0,0,2.93-.33,2.536,2.536,0,0,0,.375-1.483c0-.355-.052-.47-.2-.573a.83.83,0,0,1-.333-.9,1.621,1.621,0,0,0-.741-1.672.83.83,0,0,1-.358-.862,1.2,1.2,0,0,0-.149-.777,1.457,1.457,0,0,0-.707-.68.83.83,0,0,1-.526-.772,1.632,1.632,0,0,0-1.137-1.089,28.19,28.19,0,0,0-4.568.719A17.22,17.22,0,0,0,12.088,6.4a4.516,4.516,0,0,1-1.08.665.83.83,0,0,1-.364.084Zm-3.322.005V13.8H7.322V7.152Z" transform="translate(-4 -3)"/></svg>
                            <span><?php echo $value['dislike']; ?></span>
                        </a>
                    </div>
                </div>
                <?php foreach ($value['child'] as $item) {
                    echo '<div class="s_answer"><div class="ht-format-detail">'.$item['comment'].'</div></div>';
                } ?>
            </div>
        <?php } ?>
    </div>
    <?php if(count($this->commentList) > 5) { ?>
        <div class="s-more-1 clickAfterSort">
            <a href="javascript:;">Xem thêm <i class="fa fa-angle-double-down" aria-hidden="true"></i></a>
        </div>
    <?php } ?>
    <script type="text/javascript">
        var count = 5;
        $('body').on('click', '.s-more-1.clickAfterSort', function() {
            var number = $('.s-review-1 .s-comment-1').length;
            if (number - count <= 5) { $(this).hide(); }
            $('.s-comment-1:eq(' + count + ')').show();
            count++;
            $('.s-comment-1:eq(' + count + ')').show();
            count++;
            $('.s-comment-1:eq(' + count + ')').show();
            count++;
            $('.s-comment-1:eq(' + count + ')').show();
            count++;
            $('.s-comment-1:eq(' + count + ')').show();
            count++;
        });
    </script>
<?php } ?>